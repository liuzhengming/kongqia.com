<!DOCTYPE html>
<html>
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    

    

    

    
    <title>利用三轴加速器的计步测算方法</title>
    <meta name="description" content="人生不是要过的怎样，而是要懂得怎样去过。" />

    
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <link rel="shortcut icon" href="/assets/favicon.ico">

    
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />


    
    
</head>
<body class="post-template nav-closed">

    
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
            <li class="nav-" role="presentation"><a href="/">Home</a></li>
        
            <li class="nav-" role="presentation"><a href="/aboutme">关于我</a></li>
        
    </ul>
    
        <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>



    <div class="site-wrapper">

        
        <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">利用三轴加速器的计步测算方法</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2013-07-29">29 July 2013</time> 
            </section>
        </header>

        <section class="post-content">
            <div>随着现代生活质量提高，越来越多人开始注重自己的日常健康锻炼，计步作为一种有效记录监控锻炼的监控手段，已经广泛应用在移动终端的应用中。但目前大部分实现都是通过GPS信号来测算运动距离反推行走步数，有效但是在室内或者无GPS信号的设备上无法工作，同时GPS精度对结果的干扰也比较大，本文提出一个新的测步方法，即通过设备上的加速器来计算步数，在不支持GPS的设备上也可正常工作，可用以与GPS互相配合测步，让应用的使用场景更加多样。

**1. 了解模型特征**

目前大部分设备都提供了可以检测各个方向的加速检测器，以iOS设备为例，我们利用了其三轴加速计（x,y,z轴代表方向如图）的特性来分析。分别用以检测人步行中三个方向的加速度变化。  [![iphone](http://alibuybuy-img11.stor.sinaapp.com/2013/07/65e0_iphone.jpeg)](http://alibuybuy-img11.stor.sinaapp.com/2013/07/65e0_iphone.jpeg)

用户在水平步行运动中，垂直和前进两个加速度会呈现周期性变化，如图所示，在步行收脚的动作中，由于重心向上单只脚触地，垂直方向加速度是呈正向增加的趋势，之后继续向前，重心下移两脚触底，加速度相反。水平加速度在收脚时减小，在迈步时增加。

[![1](http://alibuybuy-img11.stor.sinaapp.com/2013/07/5d9f_110.jpg)](http://alibuybuy-img11.stor.sinaapp.com/2013/07/5d9f_110.jpg)

反映到图表中，我们可以看到在步行运动中，垂直和前进产生的加速度与时间大致为一个正弦曲线，而且在某点有一个峰值，其中垂直方向的加速度变化最大，通过对轨迹的峰值进行检测计算和加速度阈值决策，即可实时计算用户运动的步数，还可依此进一步估算用户步行距离。

[![2](http://alibuybuy-img11.stor.sinaapp.com/2013/07/0df5_2.gif)](http://alibuybuy-img11.stor.sinaapp.com/2013/07/0df5_2.gif)

 

**2.  计步算法**

因为用户在运动中可能手平持设备或者将设备置于口袋中，所以设备的放置方向不定，为此我们通过计算三个加速度的矢量长度，获得一条步行运动的正弦曲线轨迹。

第二步是峰值检测，我们记录了上次矢量长度和运动方向，通过矢量长度的变化，可以判断目前加速度的方向，并和上一次保存的加速度方向进行比较，如果是相反的，即是刚过峰值状态，则进入计步逻辑进行计步，否则舍弃。通过对峰值的次数累加可得到用户步行步伐。

最后是去干扰，手持设备会有一些低幅度和快速的抽动状态，或是我们俗称的手抖，或者某个恶作剧用户想通过短时快速反复摇动设备来模拟人走路，这些干扰数据如果不剔除，会影响记步的准确值，对于这种干扰，我们可以通过给检测加上阈值和步频判断来过滤。

[![3](http://alibuybuy-img11.stor.sinaapp.com/2013/07/07e7_32.jpg)](http://alibuybuy-img11.stor.sinaapp.com/2013/07/07e7_32.jpg)

 

人体最快的跑步频率为5HZ，也就是说相邻两步的时间间隔的至少大于0.2秒，如图所示，我们设置了timespan在记步过程中我们过滤了高频噪声，即步频过快的情况。同时我们通过和上次加速度大小进行比较，设置设立一定的阈值Threshold来判断运动是否属于有效，有效运动才可进行记步。

 

**3. 关于计步器的扩展**

以上是一个依靠加速度测算的计步器实现原理，已知步行和跑步的步伐经验值，那么稍微改进下即可变成一个测距测速计。

通过三轴加速度我们可以知道用户的运动状态，除了计步，我们还可以通过加速器的变化曲线判断用户摔倒状态，做成一个老人和儿童摔倒检测自动报警器。

</div>
<div>- (本文出自Tencent CDC Blog，转载时请注明出处)

</div>
<p> </p>

<hr />

<p><small>© 推荐 for <a href="http://www.alibuybuy.com/">互联网的那点事</a>. |<br />
 猛击下载：<a href="https://itunes.apple.com/cn/app/hu-lian-wang-de-na-dian-shi/id670210055?mt=8"><strong>iPhone客户端</strong></a> 猛击下载：<a href="http://www.alibuybuy.com/alibuybuy.apk"><strong>Android客户端</strong></a><br />
</small></p>

<p>未经允许不得转载：<a href="http://kongqia.com">空洽网</a> » <a href="http://kongqia.com/16988.html">利用三轴加速器的计步测算方法</a></p>


        </section>

        <footer class="post-footer">

        
        
        
        

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=%E5%88%A9%E7%94%A8%E4%B8%89%E8%BD%B4%E5%8A%A0%E9%80%9F%E5%99%A8%E7%9A%84%E8%AE%A1%E6%AD%A5%E6%B5%8B%E7%AE%97%E6%96%B9%E6%B3%95&amp;url=/2013/07/29/e5-88-a9-e7-94-a8-e4-b8-89-e8-bd-b4-e5-8a-a0-e9-80-9f-e5-99-a8-e7-9a-84-e8-ae-a1-e6-ad-a5-e6-b5-8b-e7-ae-97-e6-96-b9-e6-b3-95.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2013/07/29/e5-88-a9-e7-94-a8-e4-b8-89-e8-bd-b4-e5-8a-a0-e9-80-9f-e5-99-a8-e7-9a-84-e8-ae-a1-e6-ad-a5-e6-b5-8b-e7-ae-97-e6-96-b9-e6-b3-95.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=/2013/07/29/e5-88-a9-e7-94-a8-e4-b8-89-e8-bd-b4-e5-8a-a0-e9-80-9f-e5-99-a8-e7-9a-84-e8-ae-a1-e6-ad-a5-e6-b5-8b-e7-ae-97-e6-96-b9-e6-b3-95.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

            
            

        </footer>

    </article>
</main>


<aside class="read-next">
    
    <a class="read-next-story no-cover" href="/2013/07/29/e6-8f-90-e9-ab-98-e7-a7-bb-e5-8a-a8-e7-94-b5-e5-ad-90-e5-95-86-e5-8a-a1-e9-94-80-e5-94-ae-e7-9a-84-e4-ba-a4-e4-ba-92-e8-ae-be-e8-ae-a1-e6-a8-a1-e5-bc.html">
        <section class="post">
            <h2>提高移动电子商务销售的交互设计模式</h2>
            <p>

&hellip;</p>
        </section>
    </a>
    
    
    <a class="read-next-story prev no-cover" href="/2013/07/29/vs2012-e4-b8-8b-e8-bd-bd-e5-92-8c-e6-bf-80-e6-b4-bb.html">
        <section class="post">
            <h2>vs2012下载和激活</h2>
            <p>下载地址：

&hellip;</p>
        </section>
    </a>
    
</aside>


        
        <footer class="site-footer clearfix">
            <section class="copyright"><a href=""></a> &copy; 2020</section>
            <section class="poweredby">Casper theme by <a href="https://ghost.org">Ghost</a>, adopted to Jekyll by <a href="https://github.com/Jinmo/jekyll-casper">Jinmo</a></section>
        </footer>

    </div>

    
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    
    
    
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
